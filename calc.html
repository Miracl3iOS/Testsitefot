<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–∞ ‚Äî —á–∞–π</title>
<style>
:root{
  --bg:#f0f0f3; --card:#f7f7fb; --ink:#2f2f36;
  --shadow:5px 5px 10px #cfcfd6, -5px -5px 10px #ffffff;
  --inset:inset 5px 5px 10px #cfcfd6, inset -5px -5px 10px #ffffff;
  --maxw:428px; --gap:12px;
  --ink-soft:#565764;
}

/* –ë–ê–ó–ê */
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);
  font:15px/1.45 -apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Arial;
  -webkit-font-smoothing:antialiased;overflow-x:hidden}
.phone{width:min(100vw,var(--maxw));margin:0 auto;min-height:100dvh;background:var(--bg);
  box-shadow:var(--shadow);border-radius:24px;overflow:hidden;display:flex;flex-direction:column}

/* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
.status{height:56px;display:flex;align-items:center;justify-content:space-between;padding:0 16px}
.back{display:inline-block;text-decoration:none;font-weight:700;color:#2f2f36;background:#fff;padding:8px 12px;border-radius:12px;box-shadow:var(--shadow)}
.menu-btn{width:48px;height:34px;border:none;border-radius:12px;background:var(--bg);box-shadow:var(--shadow);
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:5px;cursor:pointer}
.menu-btn span{width:22px;height:2.5px;background:#000;border-radius:3px}

/* Drawer */
.drawer-wrap{position:fixed;inset:0;display:none;z-index:50}
.drawer-wrap.active{display:block}
.backdrop{position:absolute;inset:0;background:rgba(0,0,0,.25);backdrop-filter:blur(6px)}
.drawer{position:absolute;left:0;top:0;height:100%;width:min(84vw,340px);background:rgba(240,240,243,.85);
  backdrop-filter:blur(15px);box-shadow:12px 0 28px rgba(0,0,0,.15);border-top-right-radius:20px;border-bottom-right-radius:20px;
  padding:22px 20px 18px;transform:translateX(-100%);transition:transform .25s ease}
.drawer-wrap.active .drawer{transform:none}
.drawer h2{margin:0 0 14px;font-size:18px}
.m-link{display:block;padding:12px 10px;margin-bottom:8px;background:#fff;border-radius:12px;box-shadow:var(--shadow);
  text-decoration:none;color:#2f2f36;font-weight:600}

.wrap{padding:12px 16px 22px}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ ‚Äî ¬´—á—ë—Ä–Ω—ã–π –Ω–µ–æ–Ω¬ª */
h1{margin:6px 0 12px;font-weight:900;font-size:clamp(22px,6vw,30px);line-height:1.08;color:#111;
  text-shadow:0 0 3px rgba(0,0,0,.35), 0 0 8px rgba(0,0,0,.25), 0 0 16px rgba(0,0,0,.2)}
.sub{margin:4px 0 14px;color:var(--ink-soft)}

/* –î–≤–µ –≤–µ—Ä—Ö–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ */
.top-actions{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
.action{display:flex;align-items:center;justify-content:center;gap:10px;
  background:var(--card);box-shadow:var(--shadow);border-radius:14px;padding:12px;text-decoration:none;color:#2f2f36;font-weight:900}
.action.tg{background:linear-gradient(135deg,#111 0%,#1c1c1c 100%);color:#fff}
.action .tg-icon{width:18px;height:18px;background:url('telegram.png') center/contain no-repeat;filter:invert(1)}

/* –ö–∞—Ä—Ç–æ—á–∫–∞ —Ñ–æ—Ä–º—ã */
.card{background:var(--card);box-shadow:var(--shadow);border-radius:20px;padding:16px;display:grid;gap:14px}
.block h3{margin:0 0 8px;font-size:13px;color:#3c3d46;letter-spacing:.2px}
.row{display:flex;gap:10px;flex-wrap:wrap}

/* –ö–∞—Å—Ç–æ–º–Ω—ã–π dropdown */
.dropdown{position:relative}
.dd-toggle{
  box-sizing:border-box;
  max-width:100%;
  width:100%;
  display:flex;align-items:center;justify-content:space-between;gap:10px;
  background:var(--bg);box-shadow:var(--shadow);border-radius:14px;
  padding:12px 12px;
  font-weight:800;cursor:pointer
}
.dd-caret{margin-left:auto;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:7px solid #4a4b54}
.dd-list{position:absolute;left:0;right:0;top:calc(100% + 8px);background:#fff;border-radius:14px;box-shadow:0 12px 24px rgba(0,0,0,.12),var(--shadow);
  padding:6px;display:none;max-height:260px;overflow:auto;z-index:10}
.dropdown.open .dd-list{display:block}
.dd-item{padding:10px 12px;border-radius:10px;font-weight:800;color:#2f2f36;cursor:pointer}
.dd-item:hover{background:#f2f2f6}

/* —á–∏–ø—ã */
.chip{appearance:none;border:none;background:var(--bg);box-shadow:var(--shadow);color:#2f2f36;border-radius:14px;
  padding:10px 14px;font-weight:800;cursor:pointer}
.chip[data-active="1"]{background:#111;color:#fff;box-shadow:var(--inset)}

/* —á–∏—Å–ª–∞ */
.counter{display:flex;align-items:center;gap:10px}
.counter input{width:86px;appearance:textfield;border:none;background:var(--bg);box-shadow:var(--shadow);
  padding:10px 12px;border-radius:12px;font-weight:900;text-align:center}
.counter small{color:#666}

/* –∫–Ω–æ–ø–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ ‚Äî –∑–µ–ª—ë–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:14px;
  background:linear-gradient(135deg,#099268 0%,#12b886 50%,#2fefb5 100%);color:#111;font-weight:900;text-decoration:none;
  border:1px solid #000;box-shadow:var(--shadow)}
.btn:active{box-shadow:var(--inset);transform:translateY(1px)}

/* —Ä–µ–∑—É–ª—å—Ç–∞—Ç */
.result{background:#111;color:#fff;border-radius:18px;padding:16px;display:grid;gap:8px;
  box-shadow:0 0 10px rgba(0,0,0,.35), var(--shadow)}
.result h4{margin:0;font-size:14px;opacity:.8}
.total{font-size:22px;font-weight:900}
.note{font-size:12px;opacity:.8}

hr{height:1px;border:none;background:#e8e8ef;margin:4px 0}
.help{font-size:12px;color:#6b6c75}
</style>
</head>
<body>
<main class="phone">
  <div class="status">
    <a class="back" href="index.html">‚Üê –ù–∞–∑–∞–¥</a>
    <div></div>
    <button class="menu-btn" id="menuBtn" aria-label="–ú–µ–Ω—é"><span></span><span></span><span></span></button>
  </div>

  <section class="wrap">
    <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–∞</h1>
    <p class="sub">–í–≤–µ–¥–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Äî —É–≤–∏–¥–∏—à—å –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π –¥–æ—Ö–æ–¥. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã—Å—Ç–∞–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –≤—Å—ë –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å.</p>

    <div class="top-actions">
      <!-- –í–∞–∫–∞–Ω—Å–∏–∏ –≤–µ–¥—ë—Ç –Ω–∞ jobs.html -->
      <a href="jobs.html" class="action">–í–∞–∫–∞–Ω—Å–∏–∏</a>
      <a href="https://t.me/" target="_blank" rel="noopener" class="action tg">
        <span class="tg-icon" aria-hidden="true"></span> –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
      </a>
    </div>

    <div class="card" id="form">
      <div class="block">
        <h3>–¢–æ–≤–∞—Ä</h3>
        <div class="dropdown" id="productDD">
          <div class="dd-toggle" id="productToggle"><span id="productLabel">‚Äî</span><i class="dd-caret"></i></div>
          <div class="dd-list" id="productList"></div>
        </div>
      </div>

      <div class="block">
        <h3>–ö—Ç–æ —Ñ–∞—Å—É–µ—Ç?</h3>
        <div class="row" id="whoWrap">
          <button class="chip" data-name="self">–°–ê–ú</button>
          <button class="chip" data-name="not">–ù–ï –°–ê–ú</button>
        </div>
        <div class="help">–ï—Å–ª–∏ —Ñ–∞—Å—É–µ—à—å —Å–∞–º ‚Äî –¥–æ–ø–ª–∞—Ç–∞ +50‚ÇΩ –∑–∞ —É–ø–∞–∫–æ–≤–∫—É.</div>
      </div>

      <div class="block">
        <h3>–¢–∏–ø –¥–æ–ø–ª–∞—Ç—ã</h3>
        <div class="row" id="packWrap">
          <button class="chip" data-pack="none">–ë–µ–∑</button>
          <button class="chip" data-pack="metal">üß≤ –º–∞–≥–Ω–∏—Ç +50‚ÇΩ</button>
          <button class="chip" data-pack="stone">üóø –∫–∞–º–µ–Ω—å +30‚ÇΩ</button>
        </div>
      </div>

      <div class="block">
        <h3>–í–µ—Å –∫–ª–∞–¥–∞</h3>
        <div class="row" id="weightWrap"></div>
      </div>

      <div class="block">
        <h3>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞–¥–æ–≤ –≤ –¥–µ–Ω—å</h3>
        <div class="counter">
          <input type="number" id="qty" value="0" min="0" max="100" />
          <small>0‚Äì100</small>
        </div>
      </div>

      <div class="block">
        <h3>–î–Ω–µ–π —Ä–∞–±–æ—Ç—ã –≤ –Ω–µ–¥–µ–ª—é</h3>
        <div class="counter">
          <input type="number" id="days" value="0" min="0" max="7" />
          <small>0‚Äì7</small>
        </div>
      </div>

      <hr>

      <div class="result" id="resultBox">
        <h4>–í–∞—à –º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥:</h4>
        <div class="total" id="total">0 ‚ÇΩ / –º–µ—Å—è—Ü</div>
        <div class="note" id="breakdown">–ò–∑–º–µ–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã—à–µ.</div>
      </div>

      <a href="#" class="btn" id="recalcBtn">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ—Ö–æ–¥</a>
    </div>
  </section>
</main>

<!-- Drawer -->
<div class="drawer-wrap" id="drawer">
  <div class="backdrop" id="backdrop"></div>
  <aside class="drawer" role="dialog" aria-label="–ú–µ–Ω—é">
    <h2>–ú–µ–Ω—é</h2>
    <a class="m-link" href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
    <a class="m-link" href="fortune.html">–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</a>
    <a class="m-link" href="calc.html">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–∞</a>
    <a class="m-link" href="jobs.html">–í–∞–∫–∞–Ω—Å–∏–∏</a>
  </aside>
</div>

<script>
/* –ë—É—Ä–≥–µ—Ä */
const btn=document.getElementById('menuBtn');
const drawer=document.getElementById('drawer');
const backdrop=document.getElementById('backdrop');
btn.addEventListener('click',()=>drawer.classList.add('active'));
backdrop.addEventListener('click',()=>drawer.classList.remove('active'));
window.addEventListener('keydown',e=>{ if(e.key==='Escape') drawer.classList.remove('active'); });

/* –¢–∞—Ä–∏—Ñ—ã */
const PRICES = {
  shu:   {name:"–º–µ—Ñ-–∫—Ä–∏—Å,a-pvp",              weights: {"0.3":300,"0.5":400,"1.0":500,"5.0+":700}},
  puer:  {name:"–º–µ—Ñ-–º—É–∫–∞",                  weights: {"0.5":300,"1.0":450,"2.0":500,"5.0+":650}},
  tgy:   {name:"—à–∏—à–∫–∏,–≥–∞—à,–∞–º—Ñ",            weights: {"1.0":300,"2.0":400,"5.0+":600}},
  china: {name:"—Ç—Ä–∏–º —à–∏—à–µ–∫",   weights: {"1":300,"2":400,"5":580}}
};
const FAC_SELF_BONUS = 50;
const PACK_BONUS = {none:0, metal:50, stone:30};
const weekToMonth = 4.345;

/* DOM refs */
const weightWrap = document.getElementById('weightWrap');
const whoWrap = document.getElementById('whoWrap');
const packWrap = document.getElementById('packWrap');
const qtyEl = document.getElementById('qty');
const daysEl = document.getElementById('days');
const totalEl = document.getElementById('total');
const breakdownEl = document.getElementById('breakdown');
const recalcBtn = document.getElementById('recalcBtn');

/* dropdown product */
const productDD = document.getElementById('productDD');
const productToggle = document.getElementById('productToggle');
const productLabel = document.getElementById('productLabel');
const productList = document.getElementById('productList');
let productKey = null;

function openCloseDD(force){
  if(force===true){ productDD.classList.add('open'); return; }
  if(force===false){ productDD.classList.remove('open'); return; }
  productDD.classList.toggle('open');
}
productToggle.addEventListener('click',()=>openCloseDD());
document.addEventListener('click',e=>{
  if(!productDD.contains(e.target)) openCloseDD(false);
});

function buildProductList(){
  productList.innerHTML='';
  Object.entries(PRICES).forEach(([key,obj])=>{
    const div=document.createElement('div');
    div.className='dd-item';
    div.textContent=obj.name;
    div.addEventListener('click',()=>{ selectProduct(key); openCloseDD(false); });
    productList.appendChild(div);
  });
}

/* util */
function fmt(n){return n.toLocaleString('ru-RU')}
function chipify(container, attrName, value){
  [...container.querySelectorAll('.chip')].forEach(ch=>{
    ch.dataset.active = (ch.getAttribute(attrName)===value) ? "1" : "0";
  });
}
function getActiveValue(container, attrName){
  const el = container.querySelector(`.chip[${attrName}][data-active="1"]`);
  return el ? el.getAttribute(attrName) : null;
}
function clampNum(el,min,max){
  let v = parseInt(el.value||0,10);
  if(isNaN(v)) v=0;
  v=Math.max(min,Math.min(max,v));
  el.value=v;
}

/* –≤–µ—Å–∞ –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä */
function renderWeights(){
  weightWrap.innerHTML='';
  if(!productKey) return;
  const prod = PRICES[productKey];
  let firstKey = null;

  Object.entries(prod.weights).forEach(([w,price])=>{
    if(firstKey===null) firstKey = w;
    const b=document.createElement('button');
    b.className='chip';
    b.textContent=(w.includes('+')? w : w+' –≥')+` ‚Äî ${price}‚ÇΩ`;
    b.setAttribute('data-weight', w);
    b.addEventListener('click',()=>{ chipify(weightWrap,'data-weight',w); calc(); });
    weightWrap.appendChild(b);
  });

  // –≤—ã–±—Ä–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  if(firstKey){
    const keys = Object.keys(prod.weights);
    keys.sort((a,b)=>parseFloat(a) - parseFloat(b));
    chipify(weightWrap,'data-weight', keys[0]);
  }
}

/* –≤—ã–±—Ä–∞—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –¥—Ä–æ–ø–¥–∞—É–Ω–∞ */
function selectProduct(key){
  productKey = key;
  productLabel.textContent = PRICES[key].name;
  renderWeights();
  calc();
}

/* —Å–æ–±—ã—Ç–∏—è */
whoWrap.addEventListener('click',e=>{
  const btn=e.target.closest('.chip'); if(!btn) return;
  chipify(whoWrap,'data-name',btn.getAttribute('data-name')); calc();
});
packWrap.addEventListener('click',e=>{
  const btn=e.target.closest('.chip'); if(!btn) return;
  chipify(packWrap,'data-pack',btn.getAttribute('data-pack')); calc();
});
qtyEl.addEventListener('input',()=>{ clampNum(qtyEl,0,100); calc(); });
daysEl.addEventListener('input',()=>{ clampNum(daysEl,0,7); calc(); });
recalcBtn.addEventListener('click',e=>{ e.preventDefault(); calc(); });

/* —Ä–∞—Å—á—ë—Ç */
function calc(){
  const weightKey = getActiveValue(weightWrap,'data-weight');
  const self = (getActiveValue(whoWrap,'data-name')==='self') ? FAC_SELF_BONUS : 0;
  const hasPack = getActiveValue(packWrap,'data-pack');
  const pack = hasPack ? PACK_BONUS[hasPack] : 0;
  const qty = parseInt(qtyEl.value,10)||0;
  const days = parseInt(daysEl.value,10)||0;

  if(!productKey || !weightKey){
    totalEl.textContent = `0 ‚ÇΩ / –º–µ—Å—è—Ü`;
    breakdownEl.textContent = `–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä –∏ –≤–µ—Å.`;
    return;
  }

  const base = PRICES[productKey].weights[weightKey];
  const perItem = base + self + pack;
  const perDay = perItem * qty;
  const perWeek = perDay * days;
  const perMonth = Math.round(perWeek * 4.345);

  totalEl.textContent = `${fmt(perMonth)} ‚ÇΩ / –º–µ—Å—è—Ü`;
  breakdownEl.textContent =
    `${PRICES[productKey].name}: ${weightKey} ‚Äî –±–∞–∑–∞ ${fmt(base)}‚ÇΩ; –¥–æ–ø–ª–∞—Ç—ã: —Ñ–∞—Å–æ–≤–∫–∞ ${fmt(self)}‚ÇΩ, –∫–æ—Ä–ø—É—Å ${fmt(pack)}‚ÇΩ; `+
    `–≤ –¥–µ–Ω—å ${qty} √ó ${fmt(perItem)}‚ÇΩ = ${fmt(perDay)}‚ÇΩ; –≤ –Ω–µ–¥–µ–ª—é ${days} –¥–Ω = ${fmt(perWeek)}‚ÇΩ.`;
}

/* init ‚Äî –¥–µ—Ñ–æ–ª—Ç—ã */
function init(){
  buildProductList();
  chipify(whoWrap,'data-name','not');   // –ù–ï –°–ê–ú
  chipify(packWrap,'data-pack','none'); // –ë–µ–∑
  selectProduct('shu');                 // —Ç–æ–≤–∞—Ä –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å
  qtyEl.value = 0; daysEl.value = 0;    // –Ω—É–ª–∏
  calc();
}
init();
</script>
</body>
</html>
